{"ast":null,"code":"import _slicedToArray from\"/Users/jsarnik-a/Documents/Projects/learn-japanese/web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import StopIcon from'@material-ui/icons/Stop';import RecordVoiceOverIcon from'@material-ui/icons/RecordVoiceOver';import{green,red}from'@material-ui/core/colors';var useAudio=function useAudio(url){var _useState=useState(new Audio(url)),_useState2=_slicedToArray(_useState,2),audio=_useState2[0],setAudio=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),playing=_useState4[0],setPlaying=_useState4[1];useEffect(function(){if(audio!==null){playing?audio.play():stopReset();}setAudio(new Audio(url));setPlaying(false);},[url]);var toggle=function toggle(){return setPlaying(!playing);};useEffect(function(){if(audio!==null){playing?audio.play():stopReset();}},[playing]);function stopReset(){audio.pause();audio.currentTime=0;}useEffect(function(){audio.addEventListener('ended',function(){return setPlaying(false);});return function(){audio.removeEventListener('ended',function(){return setPlaying(false);});};},[]);return[playing,toggle,audio];};var Player=function Player(_ref){var url=_ref.url,controls=_ref.controls;var _url=url.indexOf('http')===-1?\"http://japanese-drills.s3.amazonaws.com/audio/\".concat(url):url;var _useAudio=useAudio(_url),_useAudio2=_slicedToArray(_useAudio,2),playing=_useAudio2[0],toggle=_useAudio2[1];var audioPlayer=useRef(null);useEffect(function(){if(audioPlayer&&audioPlayer.current){audioPlayer.current.src=_url;}},[url]);return controls?React.createElement(\"audio\",{controls:true,ref:audioPlayer},React.createElement(\"source\",{src:_url,type:\"audio/mpeg\"})):React.createElement(\"div\",{onClick:toggle},playing?React.createElement(StopIcon,{style:{color:red[500]}}):React.createElement(RecordVoiceOverIcon,{style:{color:green[500]}}));};export default Player;","map":{"version":3,"sources":["/Users/jsarnik-a/Documents/Projects/learn-japanese/web/src/components/Player.js"],"names":["React","useState","useEffect","useRef","StopIcon","RecordVoiceOverIcon","green","red","useAudio","url","Audio","audio","setAudio","playing","setPlaying","play","stopReset","toggle","pause","currentTime","addEventListener","removeEventListener","Player","controls","_url","indexOf","audioPlayer","current","src","color"],"mappings":"yIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,oCAAhC,CACA,OAASC,KAAT,CAAgBC,GAAhB,KAA2B,0BAA3B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,GAAG,CAAI,eACIR,QAAQ,CAAC,GAAIS,CAAAA,KAAJ,CAAUD,GAAV,CAAD,CADZ,wCACfE,KADe,eACRC,QADQ,8BAEQX,QAAQ,CAAC,KAAD,CAFhB,yCAEfY,OAFe,eAENC,UAFM,eAItBZ,SAAS,CAAC,UAAI,CACZ,GAAGS,KAAK,GAAK,IAAb,CAAkB,CACZE,OAAO,CAAGF,KAAK,CAACI,IAAN,EAAH,CAAkBC,SAAS,EAAlC,CACL,CACDJ,QAAQ,CAAC,GAAIF,CAAAA,KAAJ,CAAUD,GAAV,CAAD,CAAR,CACAK,UAAU,CAAC,KAAD,CAAV,CACD,CANQ,CAMN,CAACL,GAAD,CANM,CAAT,CAQA,GAAMQ,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,SAAMH,CAAAA,UAAU,CAAC,CAACD,OAAF,CAAhB,EAAf,CAEAX,SAAS,CAAC,UAAM,CACZ,GAAGS,KAAK,GAAK,IAAb,CAAkB,CACZE,OAAO,CAAGF,KAAK,CAACI,IAAN,EAAH,CAAkBC,SAAS,EAAlC,CACL,CACF,CAJM,CAKP,CAACH,OAAD,CALO,CAAT,CAQA,QAASG,CAAAA,SAAT,EAAoB,CAClBL,KAAK,CAACO,KAAN,GACAP,KAAK,CAACQ,WAAN,CAAoB,CAApB,CACD,CAEDjB,SAAS,CAAC,UAAM,CACdS,KAAK,CAACS,gBAAN,CAAuB,OAAvB,CAAgC,iBAAMN,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAAhC,EACA,MAAO,WAAM,CACXH,KAAK,CAACU,mBAAN,CAA0B,OAA1B,CAAmC,iBAAMP,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAAnC,EACD,CAFD,CAGD,CALQ,CAKN,EALM,CAAT,CAOA,MAAO,CAACD,OAAD,CAAUI,MAAV,CAAkBN,KAAlB,CAAP,CACD,CAnCD,CAqCA,GAAMW,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAAuB,IAApBb,CAAAA,GAAoB,MAApBA,GAAoB,CAAfc,QAAe,MAAfA,QAAe,CACpC,GAAMC,CAAAA,IAAI,CAAGf,GAAG,CAACgB,OAAJ,CAAY,MAAZ,IAAwB,CAAC,CAAzB,yDAA8EhB,GAA9E,EAAsFA,GAAnG,CADoC,cAEVD,QAAQ,CAACgB,IAAD,CAFE,wCAE7BX,OAF6B,eAEpBI,MAFoB,eAGpC,GAAIS,CAAAA,WAAW,CAAGvB,MAAM,CAAC,IAAD,CAAxB,CAEAD,SAAS,CAAC,UAAI,CACZ,GAAGwB,WAAW,EAAIA,WAAW,CAACC,OAA9B,CAAsC,CACpCD,WAAW,CAACC,OAAZ,CAAoBC,GAApB,CAA0BJ,IAA1B,CACD,CACF,CAJQ,CAIN,CAACf,GAAD,CAJM,CAAT,CAMA,MAAOc,CAAAA,QAAQ,CACb,6BAAO,QAAQ,KAAf,CAAgB,GAAG,CAAEG,WAArB,EACI,8BAAQ,GAAG,CAAEF,IAAb,CAAmB,IAAI,CAAC,YAAxB,EADJ,CADa,CAKb,2BAAK,OAAO,CAAEP,MAAd,EAEQJ,OAAO,CACH,oBAAC,QAAD,EAAU,KAAK,CAAE,CAAEgB,KAAK,CAAEtB,GAAG,CAAC,GAAD,CAAZ,CAAjB,EADG,CAGH,oBAAC,mBAAD,EAAqB,KAAK,CAAE,CAAEsB,KAAK,CAAEvB,KAAK,CAAC,GAAD,CAAd,CAA5B,EALZ,CALF,CAcD,CAzBD,CA2BA,cAAegB,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport StopIcon from '@material-ui/icons/Stop';\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\nimport { green, red } from '@material-ui/core/colors';\n\nconst useAudio = url => {\n  const [audio, setAudio] = useState(new Audio(url));\n  const [playing, setPlaying] = useState(false);\n\n  useEffect(()=>{\n    if(audio !== null){\n          playing ? audio.play() : stopReset();\n    }\n    setAudio(new Audio(url));\n    setPlaying(false);\n  }, [url])\n\n  const toggle = () => setPlaying(!playing);\n\n  useEffect(() => {\n      if(audio !== null){\n            playing ? audio.play() : stopReset();\n      }\n    },\n    [playing]\n  );\n\n  function stopReset(){\n    audio.pause();\n    audio.currentTime = 0;\n  }\n\n  useEffect(() => {\n    audio.addEventListener('ended', () => setPlaying(false));\n    return () => {\n      audio.removeEventListener('ended', () => setPlaying(false));\n    };\n  }, []);\n\n  return [playing, toggle, audio];\n};\n\nconst Player = ({ url, controls }) => {\n  const _url = url.indexOf('http') === -1 ? `http://japanese-drills.s3.amazonaws.com/audio/${url}` : url;\n  const [playing, toggle] = useAudio(_url);\n  let audioPlayer = useRef(null);\n\n  useEffect(()=>{\n    if(audioPlayer && audioPlayer.current){\n      audioPlayer.current.src = _url;\n    }\n  }, [url])\n\n  return controls ? (\n    <audio controls ref={audioPlayer}>\n        <source src={_url} type=\"audio/mpeg\"/>\n    </audio>\n  ) : (\n    <div onClick={toggle}>\n        {\n            playing ? \n                <StopIcon style={{ color: red[500]}}></StopIcon>\n            :\n                <RecordVoiceOverIcon style={{ color: green[500]}}></RecordVoiceOverIcon>  \n        }\n    </div>\n  );\n};\n\nexport default Player;"]},"metadata":{},"sourceType":"module"}